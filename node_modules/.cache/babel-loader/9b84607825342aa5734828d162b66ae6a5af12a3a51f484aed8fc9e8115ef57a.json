{"ast":null,"code":"var _jsxFileName = \"/Users/jhon/Documents/Proyects/nightmare/fe-nightmare-bs/src/Components/FloatingButtonModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ModalForm from \"./ModalForm\";\nimport { generateUsername } from \"./GenerateUsername\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FloatingButtonModal = ({\n  API_BASE_URL,\n  recurrenceTypes,\n  categories,\n  setStories\n}) => {\n  _s();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [newStory, setNewStory] = useState({\n    title: \"\",\n    name: \"\",\n    recurrencia: \"\",\n    category: \"\",\n    value: \"\",\n    email: \"\"\n  });\n  const [apiError, setApiError] = useState(null);\n  useEffect(() => {\n    const body = document.body;\n    if (isModalOpen) {\n      body.classList.add(\"modal-open\");\n    } else {\n      body.classList.remove(\"modal-open\");\n    }\n    return () => {\n      body.classList.remove(\"modal-open\");\n    };\n  }, [isModalOpen]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewStory(prevStory => ({\n      ...prevStory,\n      [name]: value\n    }));\n  };\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n\n    // Validar campos obligatorios\n    if (!newStory.title || !newStory.name || !newStory.value || !newStory.category || !newStory.recurrencia) {\n      setApiError(\"Please fill in all required fields.\");\n      return;\n    }\n    const storyToSubmit = [{\n      title: newStory.title.trim(),\n      name: newStory.name.trim(),\n      value: newStory.value.trim(),\n      recurrencia: newStory.recurrencia,\n      category: newStory.category,\n      mail: newStory.email.trim()\n    }];\n    try {\n      const response = await fetch(`${API_BASE_URL}notes`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(storyToSubmit)\n      });\n      if (!response.ok) {\n        const errorDetails = await response.json();\n        throw new Error(errorDetails.message || `HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      setStories(prevStories => [...prevStories, ...result.notes]);\n      setNewStory({\n        title: \"\",\n        name: \"\",\n        recurrencia: \"\",\n        category: \"\",\n        value: \"\",\n        email: \"\"\n      });\n      setIsModalOpen(false);\n      setApiError(null);\n    } catch (error) {\n      console.error(\"Error submitting story:\", error);\n      setApiError(\"Failed to submit story. Please try again later.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-story-button\",\n      onClick: () => setIsModalOpen(true),\n      children: \"+\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalForm, {\n      isModalOpen: isModalOpen,\n      setIsModalOpen: setIsModalOpen,\n      newStory: newStory,\n      handleInputChange: handleInputChange,\n      handleFormSubmit: handleFormSubmit,\n      recurrenceTypes: recurrenceTypes,\n      categories: categories,\n      generateUsername: () => generateUsername(setNewStory)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(FloatingButtonModal, \"Cw2IgjxovEXsnp6Q1tvPXiQrdfE=\");\n_c = FloatingButtonModal;\nexport default FloatingButtonModal;\nvar _c;\n$RefreshReg$(_c, \"FloatingButtonModal\");","map":{"version":3,"names":["React","useState","useEffect","ModalForm","generateUsername","jsxDEV","_jsxDEV","Fragment","_Fragment","FloatingButtonModal","API_BASE_URL","recurrenceTypes","categories","setStories","_s","isModalOpen","setIsModalOpen","newStory","setNewStory","title","name","recurrencia","category","value","email","apiError","setApiError","body","document","classList","add","remove","handleInputChange","e","target","prevStory","handleFormSubmit","preventDefault","storyToSubmit","trim","mail","response","fetch","method","headers","JSON","stringify","ok","errorDetails","json","Error","message","status","result","prevStories","notes","error","console","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jhon/Documents/Proyects/nightmare/fe-nightmare-bs/src/Components/FloatingButtonModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ModalForm from \"./ModalForm\";\nimport { generateUsername } from \"./GenerateUsername\";\n\nconst FloatingButtonModal = ({ API_BASE_URL, recurrenceTypes, categories, setStories }) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [newStory, setNewStory] = useState({\n    title: \"\",\n    name: \"\",\n    recurrencia: \"\",\n    category: \"\",\n    value: \"\",\n    email: \"\",\n  });\n  const [apiError, setApiError] = useState(null);\n\n  useEffect(() => {\n    const body = document.body;\n\n    if (isModalOpen) {\n      body.classList.add(\"modal-open\");\n    } else {\n      body.classList.remove(\"modal-open\");\n    }\n\n    return () => {\n      body.classList.remove(\"modal-open\");\n    };\n  }, [isModalOpen]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n\n    setNewStory((prevStory) => ({\n      ...prevStory,\n      [name]: value,\n    }));\n  };\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validar campos obligatorios\n    if (!newStory.title || !newStory.name || !newStory.value || !newStory.category || !newStory.recurrencia) {\n      setApiError(\"Please fill in all required fields.\");\n      return;\n    }\n\n    const storyToSubmit = [\n      {\n        title: newStory.title.trim(),\n        name: newStory.name.trim(),\n        value: newStory.value.trim(),\n        recurrencia: newStory.recurrencia,\n        category: newStory.category,\n        mail: newStory.email.trim(),\n      },\n    ];\n\n    try {\n      const response = await fetch(`${API_BASE_URL}notes`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(storyToSubmit),\n      });\n\n      if (!response.ok) {\n        const errorDetails = await response.json();\n        throw new Error(errorDetails.message || `HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      setStories((prevStories) => [...prevStories, ...result.notes]);\n      setNewStory({ title: \"\", name: \"\", recurrencia: \"\", category: \"\", value: \"\", email: \"\" });\n      setIsModalOpen(false);\n      setApiError(null);\n    } catch (error) {\n      console.error(\"Error submitting story:\", error);\n      setApiError(\"Failed to submit story. Please try again later.\");\n    }\n  };\n\n  return (\n    <>\n      {/* Bot√≥n flotante */}\n      <button className=\"add-story-button\" onClick={() => setIsModalOpen(true)}>\n        +\n      </button>\n\n      {/* Modal */}\n      <ModalForm\n        isModalOpen={isModalOpen}\n        setIsModalOpen={setIsModalOpen}\n        newStory={newStory}\n        handleInputChange={handleInputChange}\n        handleFormSubmit={handleFormSubmit}\n        recurrenceTypes={recurrenceTypes}\n        categories={categories}\n        generateUsername={() => generateUsername(setNewStory)}\n      />\n    </>\n  );\n};\n\nexport default FloatingButtonModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}